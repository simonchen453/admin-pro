<?xml version="1.0" encoding="UTF-8"?>
<config xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance'
        xmlns='http://www.ehcache.org/v3'
        xsi:schemaLocation='http://www.ehcache.org/v3 http://www.ehcache.org/schema/ehcache-core-3.10.xsd'>

    <!-- 默认模板 - 优化：减少内存使用，从 20MB 降低到 10MB -->
    <cache-template name="defaultTemplate">
        <key-type>java.lang.String</key-type>
        <value-type>java.lang.Object</value-type>
        <expiry>
            <ttl unit="seconds">120</ttl>
        </expiry>
        <resources>
            <heap unit="entries">10000</heap>
            <offheap unit="MB">10</offheap>
        </resources>
    </cache-template>

    <!-- 锁缓存模板（15秒过期） -->
    <cache-template name="lockTemplate">
        <key-type>java.lang.String</key-type>
        <value-type>java.lang.Object</value-type>
        <expiry>
            <ttl unit="seconds">15</ttl>
        </expiry>
        <resources>
            <heap unit="entries">10000</heap>
            <offheap unit="MB">10</offheap>
        </resources>
    </cache-template>

    <!-- 各种缓存定义 -->
    <cache alias="defaultCache" uses-template="defaultTemplate"/>
    <cache alias="sys:user:register:code" uses-template="defaultTemplate"/>
    <cache alias="sys:user:login:captcha" uses-template="defaultTemplate"/>
    <cache alias="sys:resource:process" uses-template="defaultTemplate"/>
    <cache alias="sys:city:id" uses-template="defaultTemplate"/>
    <cache alias="sys:city:title" uses-template="defaultTemplate"/>
    <cache alias="sys:auth:token" uses-template="defaultTemplate"/>
    <cache alias="sys:menu:parent:session" uses-template="defaultTemplate"/>
    <cache alias="sys:userdomain:env" uses-template="defaultTemplate"/>
    <cache alias="sys:menu" uses-template="defaultTemplate"/>
    <cache alias="sys:dept" uses-template="defaultTemplate"/>
    <cache alias="sys:dict" uses-template="defaultTemplate"/>
    <cache alias="sys:config" uses-template="defaultTemplate"/>
    <cache alias="sys:city:level" uses-template="defaultTemplate"/>
    <cache alias="sys:city:levelparent" uses-template="defaultTemplate"/>
    <cache alias="sys:userdomain" uses-template="defaultTemplate"/>
    <cache alias="sys:role" uses-template="defaultTemplate"/>
    <cache alias="sys:post" uses-template="defaultTemplate"/>
    <cache alias="sys:session" uses-template="defaultTemplate"/>
    <cache alias="sys:menu:session" uses-template="defaultTemplate"/>
    <cache alias="sys:wx:session:key" uses-template="defaultTemplate"/>
    <cache alias="sys:auth:user.detail" uses-template="defaultTemplate"/>
    <cache alias="sys:lock" uses-template="lockTemplate"/>

</config>
